"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[352],{3352:(w,n,t)=>{t.r(n),t.d(n,{ResetPasswordComponent:()=>h});var m=t(6814),o=t(6223),_=t(7114),u=t(1634),s=t(5879),l=t(3403),c=t(304),P=t(2425);let h=(()=>{class i{constructor(r,e,a,d,p){this._formBuilder=r,this._activatedRoute=e,this._router=a,this._authService=d,this._toastrService=p,this.emailToReset="",this.emailToken=""}ngOnInit(){this.initializeForm(),this._activatedRoute.queryParams.subscribe(r=>{this.emailToReset=r.email;let e=r.token;this.emailToken=e?e.replace(/ /g,"+"):"",(!this.emailToReset||!this.emailToken)&&(this._toastrService.error("Invalid reset link","Error"),this._router.navigate(["/login"]))})}initializeForm(){this.resetPasswordForm=this._formBuilder.group({newPassword:["",[o.kI.required,o.kI.pattern("^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[@$!%*?&])[A-Za-z\\d@$!%*?&]{6,}$")]],confirmPassword:["",[o.kI.required,(0,u.S)("newPassword")]]}),this.resetPasswordForm.get("newPassword")?.valueChanges.subscribe(()=>{this.resetPasswordForm.get("confirmPassword")?.updateValueAndValidity()})}OnSubmitResetForm(){this.resetPasswordForm.invalid&&this._toastrService.error("Please fill out the form correctly."),this.resetPasswordObj={email:this.emailToReset,newPassword:this.resetPasswordForm.value.newPassword,confirmPassword:this.resetPasswordForm.value.confirmPassword,emailToken:this.emailToken},this._authService.resetPassword(this.resetPasswordObj).subscribe({next:r=>{this._toastrService.success("Password Reset Successful"),this._router.navigate(["/login"])},error:r=>{this.handleErrorResponse(r)}})}handleErrorResponse(r){r.error&&r.error.errors&&Array.isArray(r.error.errors)?r.error.errors.forEach(e=>{this._toastrService.error(e)}):this._toastrService.error(200!==r.status&&400===r.status?r.error:"An unexpected error occurred")}static#s=this.\u0275fac=function(e){return new(e||i)(s.Y36(o.qu),s.Y36(l.gz),s.Y36(l.F0),s.Y36(c.e),s.Y36(P._W))};static#r=this.\u0275cmp=s.Xpm({type:i,selectors:[["app-reset-password"]],standalone:!0,features:[s.jDz],decls:10,vars:4,consts:[[1,"row","justify-content-center"],[1,"text-center","text-primary"],[1,"col-sm-10","col-md-8","col-lg-5","col-10","mb-3",3,"formGroup","ngSubmit"],["type","password","label","New Password",3,"formControl"],["type","password","label","Confirm Password",3,"formControl"],["type","submit",1,"btn","btn-success","w-100",3,"disabled"],[1,"fas","fa-right-to-bracket","mx-1"]],template:function(e,a){1&e&&(s.TgZ(0,"div",0)(1,"h2",1),s._uU(2,"Reset Password"),s.qZA(),s._UZ(3,"hr"),s.TgZ(4,"form",2),s.NdJ("ngSubmit",function(){return a.OnSubmitResetForm()}),s._UZ(5,"app-text-input",3)(6,"app-text-input",4),s.TgZ(7,"button",5),s._UZ(8,"i",6),s._uU(9," Reset"),s.qZA()()()),2&e&&(s.xp6(4),s.Q6J("formGroup",a.resetPasswordForm),s.xp6(1),s.Q6J("formControl",a.resetPasswordForm.controls.newPassword),s.xp6(1),s.Q6J("formControl",a.resetPasswordForm.controls.confirmPassword),s.xp6(1),s.Q6J("disabled",a.resetPasswordForm.invalid))},dependencies:[m.ez,o.UX,o._Y,o.JJ,o.JL,o.oH,o.sg,_.t]})}return i})()}}]);