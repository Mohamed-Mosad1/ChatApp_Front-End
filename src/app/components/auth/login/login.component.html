<div class="row justify-content-center">
  <h2 class="text-center text-primary">Login</h2>
  <form [formGroup]="loginForm" (ngSubmit)="login()" class="col-sm-10 col-md-8 col-lg-5 col-10 mb-3">
    <hr>
    <app-text-input type="text" label="UserName or Email"
      [formControl]="loginForm.controls['userNameOrEmail']"></app-text-input>
    <app-text-input type="password" label="Password" [formControl]="loginForm.controls['password']"></app-text-input>

    <div class="d-flex">
      <a type="button" class="btn btn-link ms-auto fw-bold" (click)="openModal(template)">Forgot Password?</a>
    </div>
    <div class="form-group text-center mt-3">
      <button type="submit" [disabled]="loginForm.invalid" class="btn btn-success me-2">
        <i class="fas fa-right-to-bracket mx-1"></i>
        Login
      </button>
      <button type="button" class="btn btn-warning" routerLink="/home">
        <i class="fas fa-right-left mx-1"></i>
        Cancel
      </button>
    </div>
  </form>
</div>

<ng-template #template>
  <div class="modal-header flex-wrap">
    <h4 class="modal-title pull-left">Forget your Password?</h4>
    <button type="button" class="btn-close close pull-right" aria-label="Close" (click)="modalRef?.hide()">
      <span aria-hidden="true" class="visually-hidden">&times;</span>
    </button>
    <p>Please provide your E-mail we will send you a link to reset your password.</p>
  </div>
  <div class="modal-body w-100">
    <mat-form-field>
      <mat-label>Enter your email</mat-label>
      <input matInput placeholder="pat@example.com" [(ngModel)]="resetPasswordEmail" (ngModelChange)="checkValidEmail($event)" required>
      <mat-icon matPrefix>email icon</mat-icon>
    </mat-form-field>
    <small class="text-danger" *ngIf="!isValidEmail && resetPasswordEmail">Email is not valid</small>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-secondary close pull-right" aria-label="Close" (click)="modalRef?.hide()">
      Close
    </button>
    <button type="button" class="btn btn-success" (click)="confirmToSendEmail()">
      Send
    </button>
  </div>
</ng-template>
