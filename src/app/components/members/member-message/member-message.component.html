<div class="card">
  <div class="card-body">
    <div *ngIf="messages?.length === 0">
      No messages yet... say hi by using the message box below
    </div>
    
    <ul *ngIf="messages.length > 0" class="list-unstyled chat">
      <li *ngFor="let message of messages">
        <div class="d-flex justify-content-between align-items-center p-2" [ngClass]="message.senderUserName === currentUserName ? 'flex-row-reverse' : 'flex-row bg-body-secondary rounded'">
          <span class="chat-img">
            <img class="rounded-circle" [src]="message.senderProfilePictureUrl || './assets/default-user-img.png'"
              [alt]="message.senderUserName">
          </span>
          <div class="chat-body">
            <div class="header">
              <small class="text-muted">
                <span class="fas fa-clock mx-1">{{message.messageSend | timeago}}</span>
                <span class="text-danger" *ngIf="!message.dateRead && message.senderUserName !== UserName">
                  <span style="font-size: 10px; font-weight: bold;color: gray;">
                    {{message.messageSend | timeago}} </span>
                    <strong> (unread)</strong>
                </span>
                <span class="text-success mx-1" *ngIf="message.dateRead && message.senderUserName !== UserName">
                  <span style="font-size: 10px; font-weight: bold;color: gray;">
                    {{message.messageSend | timeago}} </span>
                  <strong *ngIf="message.senderUserName === currentUserName"> (read {{ message.dateRead | timeago
                    }})</strong>
                </span>
              </small>
            </div>
            <p class="my-1" [class.text-end]="message.senderUserName !== currentUserName">{{message.content}}</p>
          </div>
        </div>
      </li>
    </ul>
  </div>

  <div class="card-footer">
    <form #messageForm="ngForm" autocomplete="off" (ngSubmit)="sendMessage()">
      <div class="input-group">
        <input placeholder="Send a private message" [(ngModel)]="messageContent" name="messageContent" type="text"
          class="form-control input-sm" required>
        <div class="input-group-append">
          <button [disabled]="!messageForm.valid" class="btn btn-warning mx-2" type="submit">
            <i class="fas fa-paper-plane"></i>
            Send</button>
        </div>
      </div>
    </form>
  </div>
</div>
