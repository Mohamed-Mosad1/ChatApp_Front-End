<div class="container">
  <div class="row justify-content-center my-3">
    <div class="col-md-6 text-center">
      <div class="group" name="container">
        <button class="btn btn-custom" [ngClass]="{'btn-active': container === 'UnRead'}" btnRadio="UnRead" [(ngModel)]="container" (click)="loadMessages()">
          <i class="fa fa-envelope"></i> UnRead
        </button>
        <button class="btn btn-custom" [ngClass]="{'btn-active': container === 'Inbox'}" btnRadio="Inbox" [(ngModel)]="container" (click)="loadMessages()">
          <i class="fa fa-envelope-open"></i> Inbox
        </button>
        <button class="btn btn-custom" [ngClass]="{'btn-active': container === 'Outbox'}" btnRadio="Outbox" [(ngModel)]="container" (click)="loadMessages()">
          <i class="fa fa-paper-plane"></i> Outbox
        </button>
      </div>
    </div>
  </div>

  <div class="row text-center" *ngIf="messages?.length === 0">
    <h3>No messages</h3>
  </div>

  <div class="row" *ngIf="messages?.length > 0">
    <table class="table table-hover text-center">
      <thead>
        <tr>
          <th style="width: 40%">Message</th>
          <th style="width: 20%">{{ container === 'Outbox' ? 'To' : 'From' }}</th>
          <th style="width: 20%">{{ container === 'Outbox' ? 'Sent' : 'Received' }}</th>
          <th style="width: 20%">Action</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let message of messages"
            [queryParams]='{tab: 3}'>
          <td>{{message.content}}</td>
          <td  style="cursor: pointer" [queryParams]="{tab: 3}" [routerLink]="container === 'Outbox' ? '/member/' + message.recipientUserName : '/member/' + message.senderUserName">
            <div *ngIf="container === 'Outbox'">
              <img class="img-circle object-fit-cover rounded-circle mx-2"
                   [src]="message.senderProfilePictureUrl || './assets/images/default-user-img.png'" [alt]="message.senderUserName">
              <strong class="mx-2">{{message.senderUserName | titlecase}}</strong>
            </div>
            <div *ngIf="container !== 'Outbox'">
              <img class="img-circle object-fit-cover rounded-circle mx-2"
                   [src]="message.senderProfilePictureUrl || './assets/images/default-user-img.png'" [alt]="message.senderUserName">
              <strong>{{message.senderUserName | titlecase}}</strong>
            </div>
          </td>
          <td>{{message.messageSend | timeago }}</td>
          <td>
            <button (click)="$event.stopPropagation()" (click)="deleteMessage(message.id)" class="btn btn-outline-danger">
              <i class="fas fa-trash mx-1"></i> Delete
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="d-flex justify-content-center" *ngIf="pagination?.totalItems > 7">
    <pagination
      [boundaryLinks]="true"
      [totalItems]="pagination.totalItems"
      [itemsPerPage]="pagination.itemsPerPage"
      [(ngModel)]="pagination.currentPage"
      (pageChanged)="pageChanged($event)"
      [maxSize]="3"
      previousText="&lsaquo;"
      nextText="&rsaquo;"
      firstText="&laquo;"
      lastText="&raquo;">
    </pagination>
  </div>

</div>
